<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Clio PDF Position Adjuster</title>
    <style>
        body {
            font-family: Arial, sans-serif;
            margin: 20px;
            background-color: #f5f5f5;
        }
        .container {
            max-width: 1400px;
            margin: 0 auto;
            background: white;
            padding: 20px;
            border-radius: 8px;
            box-shadow: 0 2px 10px rgba(0,0,0,0.1);
        }
        .header {
            text-align: center;
            margin-bottom: 30px;
            padding-bottom: 20px;
            border-bottom: 2px solid #e0e0e0;
        }
        .pdf-viewer {
            display: flex;
            gap: 20px;
            margin-bottom: 30px;
        }
        .pdf-section {
            flex: 1;
            border: 1px solid #ddd;
            border-radius: 4px;
            overflow: hidden;
        }
        .pdf-section h3 {
            background: #f8f9fa;
            margin: 0;
            padding: 10px;
            border-bottom: 1px solid #ddd;
            font-size: 14px;
        }
        .pdf-frame {
            width: 100%;
            height: 600px;
            border: none;
        }
        .instructions {
            background: #d1ecf1;
            padding: 15px;
            border-radius: 4px;
            margin-bottom: 20px;
        }
        .instructions h4 {
            margin-top: 0;
            color: #0c5460;
        }
        .field-list {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(300px, 1fr));
            gap: 15px;
            margin-top: 20px;
        }
        .field-item {
            background: white;
            padding: 15px;
            border: 1px solid #ddd;
            border-radius: 4px;
            box-shadow: 0 1px 3px rgba(0,0,0,0.1);
        }
        .field-name {
            font-weight: bold;
            color: #2c3e50;
            margin-bottom: 8px;
        }
        .coordinates {
            display: grid;
            grid-template-columns: 1fr 1fr;
            gap: 10px;
            margin-bottom: 10px;
        }
        .coord-input {
            display: flex;
            flex-direction: column;
        }
        .coord-input label {
            font-size: 12px;
            color: #666;
            margin-bottom: 2px;
        }
        .coord-input input {
            padding: 5px;
            border: 1px solid #ddd;
            border-radius: 3px;
            font-size: 12px;
        }
        .current-coords {
            background: #e3f2fd;
            padding: 8px;
            border-radius: 3px;
            font-size: 12px;
            margin-bottom: 10px;
        }
        .export-section {
            background: #d4edda;
            padding: 20px;
            border-radius: 4px;
            text-align: center;
        }
        .export-btn {
            background: #28a745;
            color: white;
            border: none;
            padding: 12px 24px;
            border-radius: 4px;
            cursor: pointer;
            font-size: 16px;
            margin: 10px;
        }
        .export-btn:hover {
            background: #218838;
        }
    </style>
</head>
<body>
    <div class="container">
        <div class="header">
            <h1>Clio PDF Position Adjuster</h1>
            <p>Compare your generated PDF with Clio PDF and adjust field positions</p>
        </div>

        <div class="instructions">
            <h4>Instructions:</h4>
            <ol>
                <li><strong>Load PDFs:</strong> Upload your generated PDF and the Clio PDF (test.pdf)</li>
                <li><strong>Compare:</strong> View both PDFs side by side and identify misaligned fields</li>
                <li><strong>Measure:</strong> Use Adobe Acrobat's measurement tool to get exact coordinates</li>
                <li><strong>Adjust:</strong> Enter the correct coordinates for each misaligned field</li>
                <li><strong>Export:</strong> Download the updated position data</li>
            </ol>
        </div>

        <div class="pdf-viewer">
            <div class="pdf-section">
                <h3>Your Generated PDF</h3>
                <input type="file" id="generatedPdf" accept=".pdf" style="margin: 10px;">
                <iframe id="generatedFrame" class="pdf-frame" src="about:blank"></iframe>
            </div>
            <div class="pdf-section">
                <h3>Clio PDF (test.pdf)</h3>
                <iframe id="clioFrame" class="pdf-frame" src="test.pdf"></iframe>
            </div>
        </div>

        <div class="field-list" id="fieldList">
            <!-- Fields will be populated by JavaScript -->
        </div>

        <div class="export-section">
            <h3>Export Updated Positions</h3>
            <p>Download the corrected field positions to replace your current position file.</p>
            <button class="export-btn" onclick="exportPositions()">Export Updated Positions</button>
            <button class="export-btn" onclick="resetPositions()">Reset to Original</button>
        </div>
    </div>

    <script>
        // Load current position data
        let originalPositions = {};
        let currentPositions = {};

        // Field definitions with current positions
        const fieldData = {
            "attorney_name": { "x": 35, "y": 28, "width": 85, "height": 8, "fontSize": 9, "type": "text", "page": 1 },
            "attorney_bar_number": { "x": 145, "y": 28, "width": 60, "height": 8, "fontSize": 9, "type": "text", "page": 1 },
            "attorney_firm": { "x": 35, "y": 41, "width": 85, "height": 8, "fontSize": 9, "type": "text", "page": 1 },
            "attorney_address": { "x": 35, "y": 54, "width": 85, "height": 8, "fontSize": 9, "type": "text", "page": 1 },
            "attorney_city_state_zip": { "x": 35, "y": 67, "width": 85, "height": 8, "fontSize": 9, "type": "text", "page": 1 },
            "attorney_phone": { "x": 35, "y": 80, "width": 60, "height": 8, "fontSize": 9, "type": "text", "page": 1 },
            "attorney_email": { "x": 35, "y": 93, "width": 85, "height": 8, "fontSize": 9, "type": "text", "page": 1 },
            "case_number": { "x": 155, "y": 28, "width": 60, "height": 8, "fontSize": 9, "type": "text", "page": 1 },
            "court_county": { "x": 155, "y": 41, "width": 60, "height": 8, "fontSize": 9, "type": "text", "page": 1 },
            "court_address": { "x": 155, "y": 54, "width": 60, "height": 8, "fontSize": 9, "type": "text", "page": 1 },
            "case_type": { "x": 155, "y": 67, "width": 60, "height": 8, "fontSize": 9, "type": "text", "page": 1 },
            "filing_date": { "x": 155, "y": 80, "width": 60, "height": 8, "fontSize": 9, "type": "text", "page": 1 },
            "petitioner_name": { "x": 30, "y": 45, "width": 100, "height": 8, "fontSize": 9, "type": "text", "page": 2 },
            "respondent_name": { "x": 30, "y": 58, "width": 100, "height": 8, "fontSize": 9, "type": "text", "page": 2 },
            "petitioner_address": { "x": 30, "y": 71, "width": 120, "height": 8, "fontSize": 9, "type": "text", "page": 2 },
            "petitioner_phone": { "x": 30, "y": 84, "width": 80, "height": 8, "fontSize": 9, "type": "text", "page": 2 },
            "respondent_address": { "x": 30, "y": 97, "width": 120, "height": 8, "fontSize": 9, "type": "text", "page": 2 },
            "marriage_date": { "x": 30, "y": 185, "width": 60, "height": 8, "fontSize": 9, "type": "text", "page": 2 },
            "separation_date": { "x": 105, "y": 198, "width": 60, "height": 8, "fontSize": 9, "type": "text", "page": 2 },
            "marriage_location": { "x": 30, "y": 211, "width": 120, "height": 8, "fontSize": 9, "type": "text", "page": 2 },
            "grounds_for_dissolution": { "x": 30, "y": 224, "width": 150, "height": 8, "fontSize": 9, "type": "text", "page": 2 },
            "dissolution_type": { "x": 30, "y": 152, "width": 100, "height": 8, "fontSize": 9, "type": "text", "page": 2 },
            "property_division": { "x": 30, "y": 100, "width": 6, "height": 6, "fontSize": 9, "type": "checkbox", "page": 2 },
            "spousal_support": { "x": 30, "y": 113, "width": 6, "height": 6, "fontSize": 9, "type": "checkbox", "page": 2 },
            "attorney_fees": { "x": 30, "y": 126, "width": 6, "height": 6, "fontSize": 9, "type": "checkbox", "page": 2 },
            "name_change": { "x": 30, "y": 139, "width": 6, "height": 6, "fontSize": 9, "type": "checkbox", "page": 2 },
            "has_children": { "x": 30, "y": 240, "width": 100, "height": 8, "fontSize": 9, "type": "text", "page": 2 },
            "children_count": { "x": 150, "y": 253, "width": 30, "height": 8, "fontSize": 9, "type": "text", "page": 2 },
            "additional_info": { "x": 30, "y": 35, "width": 160, "height": 40, "fontSize": 9, "type": "textarea", "page": 3 },
            "attorney_signature": { "x": 30, "y": 90, "width": 100, "height": 8, "fontSize": 9, "type": "text", "page": 3 },
            "signature_date": { "x": 150, "y": 103, "width": 60, "height": 8, "fontSize": 9, "type": "text", "page": 3 }
        };

        // Initialize
        function init() {
            originalPositions = { ...fieldData };
            currentPositions = { ...fieldData };
            renderFieldList();
            setupFileHandlers();
        }

        function setupFileHandlers() {
            document.getElementById('generatedPdf').addEventListener('change', function(e) {
                const file = e.target.files[0];
                if (file) {
                    const url = URL.createObjectURL(file);
                    document.getElementById('generatedFrame').src = url;
                }
            });
        }

        function renderFieldList() {
            const fieldList = document.getElementById('fieldList');
            fieldList.innerHTML = '';

            Object.entries(currentPositions).forEach(([fieldName, coords]) => {
                const fieldDiv = document.createElement('div');
                fieldDiv.className = 'field-item';
                
                fieldDiv.innerHTML = `
                    <div class="field-name">${fieldName}</div>
                    <div class="current-coords">
                        Current: X=${coords.x}, Y=${coords.y}, W=${coords.width}, H=${coords.height} (Page ${coords.page})
                    </div>
                    <div class="coordinates">
                        <div class="coord-input">
                            <label>X Position (mm)</label>
                            <input type="number" id="x_${fieldName}" value="${coords.x}" step="0.1">
                        </div>
                        <div class="coord-input">
                            <label>Y Position (mm)</label>
                            <input type="number" id="y_${fieldName}" value="${coords.y}" step="0.1">
                        </div>
                        <div class="coord-input">
                            <label>Width (mm)</label>
                            <input type="number" id="w_${fieldName}" value="${coords.width}" step="0.1">
                        </div>
                        <div class="coord-input">
                            <label>Height (mm)</label>
                            <input type="number" id="h_${fieldName}" value="${coords.height}" step="0.1">
                        </div>
                    </div>
                `;

                // Add event listeners
                ['x', 'y', 'w', 'h'].forEach(coord => {
                    const input = fieldDiv.querySelector(`#${coord}_${fieldName}`);
                    input.addEventListener('input', () => updatePosition(fieldName));
                });

                fieldList.appendChild(fieldDiv);
            });
        }

        function updatePosition(fieldName) {
            const x = parseFloat(document.getElementById(`x_${fieldName}`).value) || 0;
            const y = parseFloat(document.getElementById(`y_${fieldName}`).value) || 0;
            const w = parseFloat(document.getElementById(`w_${fieldName}`).value) || 0;
            const h = parseFloat(document.getElementById(`h_${fieldName}`).value) || 0;

            currentPositions[fieldName] = {
                ...currentPositions[fieldName],
                x: x,
                y: y,
                width: w,
                height: h
            };
        }

        function exportPositions() {
            const dataStr = JSON.stringify(currentPositions, null, 2);
            const dataBlob = new Blob([dataStr], { type: 'application/json' });
            const url = URL.createObjectURL(dataBlob);
            
            const link = document.createElement('a');
            link.href = url;
            link.download = 't_fl100_gc120_positions_corrected.json';
            link.click();
            
            URL.revokeObjectURL(url);
            
            alert('Position data exported! Replace data/t_fl100_gc120_positions.json with this corrected version.');
        }

        function resetPositions() {
            if (confirm('Reset all positions to original values?')) {
                currentPositions = { ...originalPositions };
                renderFieldList();
            }
        }

        // Initialize when page loads
        document.addEventListener('DOMContentLoaded', init);
    </script>
</body>
</html>
